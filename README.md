
# Task Overview

A SaaS product is experiencing delays when registering new users, as notification email sending is blocking the main API request and the emails often do not get sent at all. The engineering team needs the registration endpoint to respond instantly while a welcome email is reliably sent in the background after successful registration, following best asynchronous practices in FastAPI to avoid blocking and potential performance bottlenecks for concurrent signups.

# Guidance

- Use FastAPI's standard patterns for background tasks to offload non-blocking work from the main request-response flow
- Isolate all blocking or I/O-bound operations (such as sending emails) from the main API logic
- Ensure your background function is properly received and triggered after user creation
- All database interactions should use async SQLAlchemy
- SQL and email credentials must be securely provided using environment variables
- Keep your project modular with separate files for database models, schemas, and application code
- Containerize both the FastAPI service and PostgreSQL with Docker and Docker Compose for full-stack development
- Document your models using Pydantic with proper field descriptions and examples for OpenAPI documentation
- All code should be formatted and structured for clarity and maintainability

# Objectives

- Implement a user registration endpoint that responds immediately after persisting data to the database
- Offload email notification logic into FastAPI's background processing system
- Guarantee that background email notifications are triggered after successful user registration
- Employ async/await for all database operations and avoid blocking the main event loop
- Use environment-based configuration for sensitive credentials
- Structure the project with models, schemas, and main application modules separated

# How to Verify

- Register a new user and confirm that the API response is immediate, with no noticeable delay for the client
- Confirm that a notification email is sent in the background for each new registered user
- Check the logs to ensure email tasks are executed after, not during, the request cycle
- Simulate multiple concurrent registrations and ensure the API consistently delivers fast responses with no blocked or failed requests
- Validate that user data is correctly saved in PostgreSQL and no sensitive information is leaked in responses
- Review autogenerated documentation to ensure models, endpoints, and expected fields are correctly described
